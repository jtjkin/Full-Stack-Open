(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),o=t.n(u),s=(t(20),t(14)),c=t(2),l=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.filter,onChange:e.filterHandler}))},i=t(3),m=t.n(i),d="https://sleepy-brook-28895.herokuapp.com/api/persons",f=function(){return m.a.get(d).then((function(e){return e.data}))},p=function(e){return m.a.post(d,e).then((function(e){return e.data}))},b=function(e,n){return m.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){var n=m.a.delete("".concat(d,"/").concat(e));console.log(n.then((function(e){return e.data})))},g=function(e){return r.a.createElement("p",{className:"person",key:e.person.id},e.person.name," ",e.person.phonenumber," ",r.a.createElement("button",{onClick:function(){!0===window.confirm("Delete ".concat(e.person.name,"?"))&&(h(e.person.id),e.setPersons(e.allPersons.filter((function(n){return n.id!==e.person.id}))),e.setNewFilteredPersons(e.allPersons.filter((function(n){return n.id!==e.person.id}))),e.setMessage("".concat(e.person.name," has been removed.")),setTimeout((function(){e.setMessage(null)}),2e3))}},"delete"))},v=function(e){return r.a.createElement("div",null,e.persons.map((function(n){return r.a.createElement(g,{key:n.name,person:n,setPersons:e.setPersons,setNewFilteredPersons:e.setNewFilteredPersons,allPersons:e.allPersons,setMessage:e.setMessage})})))},E=function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.nameValue,onChange:e.nameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.numberValue,onChange:e.numberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},j=function(e){var n=e.message,t=e.messageClass;return null===n?null:r.a.createElement("div",{className:t},n)},O=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)(""),i=Object(c.a)(o,2),m=i[0],d=i[1],h=Object(a.useState)(""),g=Object(c.a)(h,2),O=g[0],w=g[1],P=Object(a.useState)(""),C=Object(c.a)(P,2),S=C[0],k=C[1],y=Object(a.useState)([]),M=Object(c.a)(y,2),N=M[0],T=M[1],F=Object(a.useState)(null),V=Object(c.a)(F,2),D=V[0],H=V[1],J=Object(a.useState)("message"),x=Object(c.a)(J,2),A=x[0],B=x[1];Object(a.useEffect)((function(){f().then((function(e){u(e),T(e)}))}),[]);var I=function(){return t.map((function(e){return e.name})).includes(m)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(j,{message:D,messageClass:A}),r.a.createElement(l,{value:S,filterHandler:function(e){k(e.target.value),""===e.target.value&&T(t);var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value)}));T(n)}}),r.a.createElement("h2",null,"Add new"),r.a.createElement(E,{handleSubmit:function(e){if(e.preventDefault(),I()){if(!0===window.confirm("".concat(m," is already added to the phonebook, update old number?"))){var n=t.find((function(e){return e.name===m})),a=Object(s.a)({},n,{phonenumber:O});b(n.id,a).then((function(e){u(t.map((function(t){return t.id!==n.id?t:e}))),T(t.map((function(t){return t.id!==n.id?t:e}))),H("".concat(m,"'s phonenumber has been updated!")),setTimeout((function(){H(null)}),2e3)})).catch((function(e){B("errorMessage"),H("Cannot update. ".concat(n.name," has already been deleted from server.")),setTimeout((function(){H(null),B("message")}),3e3),d(""),w("")}))}return d(""),void w("")}p({name:m,phonenumber:O}).then((function(e){u(t.concat(e)),T(t.concat(e)),H("".concat(m," has been added!")),setTimeout((function(){H(null)}),2e3)})).catch((function(e){console.log(e.response.data),B("errorMessage"),H("".concat(e.response.data.error)),setTimeout((function(){B("message"),H(null)}),3e3)})),d(""),w("")},nameValue:m,nameChange:function(e){d(e.target.value)},numberValue:O,numberChange:function(e){w(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{persons:N,setPersons:u,setNewFilteredPersons:T,allPersons:t,setMessage:H}))};o.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a225d7ec.chunk.js.map